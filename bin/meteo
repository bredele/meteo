#!/usr/bin/env node

var request = require('superagent'),
		program = require('commander');

function log(msg, color){
  color = color || '36';
  var w = 10;
  console.log('  \033[' + color + 'm%s\033[m',  msg);
}

/**
 * Usage.
 */

program
  .version(require('../package.json').version)
  .option('-l, --location <location>', 'weather location', 'Calgary')
  program.parse(process.argv);


request.get('http://api.openweathermap.org/data/2.5/weather?q=' + program.location + '&units=metric&mode=json', function(res){
	var weather = JSON.parse(res.text);
	log(program.location);
	log('  ' + weather.weather[0].description);
	log('  ' + weather.main.temp + 'Â°C', '34');
});